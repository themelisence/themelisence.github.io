!function(a){a.fn.quadify=function(a){return e=a.elements,e[0].push(0),e[1].push(0),e[2].push(0),e.push([0,0,0,1]),$M(e)},a.fn.tridView=function(t){var e=a.extend({perspective:300,useMouse:!1},t);return a("html,body").css({margin:"0px",padding:"0px"}),this.addClass("trid-viewport"),priorDisplay=this.css("display"),this.css({display:"none"}),this.css({width:"0px",height:"0px",perspective:e.perspective,left:Math.round(a(window).width()/2),top:Math.round(a(window).height()/2),position:"absolute","transform-style":"preserve-3d"}),this.css({display:priorDisplay}),a(window).resize(function(){a(".trid-viewport").css({width:"0px",height:"0px",perspective:e.perspective,left:Math.round(a(window).width()/2),top:Math.round(a(window).height()/2),position:"absolute"})}),a("<style>.select-disabled { user-select:none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;}</style>").appendTo("head"),innerHtml=this.html(),this.html('<div class="trid-camera"></div>'),a(".trid-camera").html(innerHtml),a(".trid-camera").camera({useMouse:e.useMouse}),this},a.fn.cameraMouse=function(t){t?(a("body").addClass("select-disabled"),a(".trid-viewport").addClass("select-disabled"),a(window).mousedown(function(){a(".trid").addClass("select-disabled"),a(".trid").contents().addClass("select-disabled"),a(".trid").children().addClass("select-disabled"),a(".trid").children().contents().addClass("select-disabled"),a(window).mousemove(function(t){camera=a(".trid-camera").first(),pmx=camera.data("pmx"),pmy=camera.data("pmy"),null==pmx&&(pmx=t.pageX,pmy=t.pageY),t.ctrlKey?(camera.data("cz",camera.data("cz")+50*(t.pageY-pmy)),camera.data("cx",camera.data("cx")+-10*(t.pageX-pmx))):(camera.data("cry",camera.data("cry")+(t.pageX-pmx)/-5),camera.data("crx",camera.data("crx")+(t.pageY-pmy)/5)),camera.data("pmx",t.pageX),camera.data("pmy",t.pageY),text="rotateY("+camera.data("cry")+"deg) rotateX("+camera.data("crx")+"deg) rotateZ("+camera.data("crz")+"deg) translate3d("+-camera.data("cx")+"px,"+-camera.data("cy")+"px,"+-camera.data("cz")+"px)",camera.css({transform:text,"-ms-transform":text,"-webkit-transform":text,"transform-style":"preserve-3d"})})}),a(window).mouseup(function(){a(window).unbind("mousemove"),camera=a(".trid-camera").first(),camera.data("pmx",null),camera.data("pmy",null),a(".trid").removeClass("select-disabled"),a(".trid").contents().removeClass("select-disabled"),a(".trid").children().removeClass("select-disabled"),a(".trid").children().contents().removeClass("select-disabled")})):(a(window).unbind("mousemove"),a(window).unbind("mousedown"),a(window).unbind("mouseup"),camera=a(".trid-camera").first(),camera.data("pmx",null),camera.data("pmy",null),a(".trid").removeClass("select-disabled"),a(".trid").contents().removeClass("select-disabled"),a(".trid").children().removeClass("select-disabled"),a(".trid").children().contents().removeClass("select-disabled"))},a.fn.camera=function(t){var e=a.extend({useMouse:!0,perspective:300,"-moz-perspective":300},t);return this.data("cx",0),this.data("cy",0),this.data("cz",0),this.data("crx",0),this.data("cry",0),this.data("crz",0),e.useMouse&&this.cameraMouse(!0),this},a.fn.trid=function(t){var e=a.extend({x:this.data("x"),y:this.data("y"),z:this.data("z"),rx:this.data("rx"),ry:this.data("ry"),rz:this.data("rz"),sx:this.data("sx"),sy:this.data("sy"),sz:this.data("sz")},t);return null==e.x&&(e.x=0),null==e.y&&(e.y=0),null==e.z&&(e.z=0),null==e.rx&&(e.rx=0),null==e.ry&&(e.ry=0),null==e.rz&&(e.rz=0),null==e.sx&&(e.sx=1),null==e.sy&&(e.sy=1),null==e.sz&&(e.sz=1),this.data("x",e.x),this.data("y",e.y),this.data("z",e.z),this.data("rx",e.rx),this.data("ry",e.ry),this.data("rz",e.rz),this.data("sx",e.sx),this.data("sy",e.sy),this.data("sz",e.sz),this.addClass("trid"),a(this).css({position:"absolute","transform-origin":"50% 50%","transform-style":"preserve-3d"}),this}}(jQuery),jQuery.tridTick=function(){$(".trid").each(function(){text="scale3d("+$(this).data("sx")+","+$(this).data("sy")+","+$(this).data("sz")+")translate3d("+$(this).data("x")+"px,"+$(this).data("y")+"px,"+$(this).data("z")+"px) rotateY("+$(this).data("ry")+"deg) rotateX("+$(this).data("rx")+"deg) rotateZ("+$(this).data("rz")+"deg)",$(this).css({transform:text,"-ms-transform":text,"-webkit-transform":text})})};