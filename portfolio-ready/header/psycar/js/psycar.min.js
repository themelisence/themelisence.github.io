!function(t){function e(t,e){this.x=t,this.y=e}t.fn.psycar=function(i){var n=0,r=[],o=[],h=[],a=[],l=new e(0,0),s=[],f=t.extend({time_interval_ms:40,cSpeed:10,cAmplitude:10,cDeformation:2,backColor:"#FEC657",isBezier:"true"},i);$this=t(this);var c=function(t){for(var e=0;e<5;e++)s[e]=Math.floor(5*Math.random()+5)},u=function(t,i,n){var l=i/(t-1);a=[];for(var s=0;s<t;s++){var f=new e(0,0);a.push(f)}r=[],o=[],h=[];var c=0,u=n/3;for(s=0;s<t;s++){var y=Math.floor(Math.random()*u)+2*u,v=y-Math.floor(Math.random()*u)-u/3,d=v-Math.floor(Math.random()*u)-u/3,g=new e(c,y);h.push(g);var m=new e(c,v);o.push(m);var x=new e(c,d);r.push(x),c+=l}},y=$this.width(),v=$this.height(),d="psycar-canvas-"+$this.attr("id"),g=(t('<canvas id="'+d+'">').attr({width:$this.width(),height:$this.height()}).prependTo($this),function(){y=$this.width(),v=$this.height();var t=document.getElementById(d);t.setAttribute("width",y.toString()),t.setAttribute("height",v.toString())}),m=function(t,e,i,n,r,o){var h=f.cDeformation;t.beginPath(),t.moveTo(0,i),l.x=a[0].x,l.y=a[0].y,t.moveTo(l.x,l.y);for(var s=i/8,c=0;c<a.length-1;c++)l.x=a[c+1].x,l.y=a[c+1].y,"true"==f.isBezier?t.bezierCurveTo(a[c].x+s*h,a[c].y,a[c+1].x-s*h,a[c+1].y,a[c+1].x,a[c+1].y):t.lineTo(a[c+1].x,a[c+1].y);t.lineTo(e,i),t.lineTo(0,i),t.lineTo(0,a[0].y),t.moveTo(e,i),t.fillStyle=n,t.strokeStyle=r,t.lineWidth=i/60,t.closePath(),t.fill(),t.stroke()},x=function(){var t=document.getElementById(d),e=t.width,i=t.height;if(t.getContext){var l=t.getContext("2d");l.fillStyle=f.backColor,l.fillRect(0,0,e,i);for(var s=0;s<r.length;s++)a[s].x=r[s].x,a[s].y=r[s].y;m(l,e,i,"#F27255","#F75F2E");for(s=0;s<o.length;s++)a[s].x=o[s].x,a[s].y=o[s].y;m(l,e,i,"#45A1D2","#765254");for(s=0;s<h.length;s++)a[s].x=h[s].x,a[s].y=h[s].y;m(l,e,i,"#EC1B54","#79325E")}n++};$this.click(function(e){t(this).offset(),document.getElementById(d);x()});var p={regenere:function(){regenere(),x()},resize:function(){g(),c(),u(5,y,v),x()}};return g(),c(),u(5,y,v),x(),startStop=setInterval(function(){!function(){for(var t=0;t<r.length;t++){var e=v*f.cAmplitude*Math.sin(f.cSpeed*n/s[t]);r[t].y+=e,o[t].y+=e,h[t].y+=e}++n%100==0&&c(),n%1e3==0&&u(5,y,v)}(),x()},f.time_interval_ms),p}}(jQuery);